<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-troubleshooting/proxy" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.1"><title data-rh=true>Proxy and mirrors | Metals</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=http://scalameta.org/metals/img/scalameta-logo.png /><meta data-rh=true name=twitter:image content=http://scalameta.org/metals/img/scalameta-logo.png /><meta data-rh=true property=og:url content=http://scalameta.org/metals/docs/troubleshooting/proxy /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Proxy and mirrors | Metals"/><meta data-rh=true name=description content="There are several parts inside Metals and Bloop that require resolving"/><meta data-rh=true property=og:description content="There are several parts inside Metals and Bloop that require resolving"/><link data-rh=true rel=icon href=/metals/img/favicon.ico /><link data-rh=true rel=canonical href=http://scalameta.org/metals/docs/troubleshooting/proxy /><link data-rh=true rel=alternate href=http://scalameta.org/metals/docs/troubleshooting/proxy hreflang=en /><link data-rh=true rel=alternate href=http://scalameta.org/metals/docs/troubleshooting/proxy hreflang=x-default /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"http://scalameta.org/metals/docs/troubleshooting/proxy","name":"Proxy and mirrors","position":1}]}</script><link rel=alternate type=application/rss+xml href=/metals/blog/rss.xml title="Metals RSS Feed"><link rel=alternate type=application/atom+xml href=/metals/blog/atom.xml title="Metals Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=UA-140140828-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-140140828-1",{})</script><link rel=stylesheet href=/metals/assets/css/styles.8e378d32.css /><script src=/metals/assets/js/runtime~main.f4c41ef2.js defer></script><script src=/metals/assets/js/main.63dc0601.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/metals/img/scalameta-logo.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/metals/><div class=navbar__logo><img src=/metals/img/scalameta-logo.png alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/metals/img/scalameta-logo.png alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">Metals</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/metals/docs/>Docs</a><a class="navbar__item navbar__link" href=/metals/blog/>Blog</a><a href=https://github.com/scalameta/metals target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><div class="navbar__search searchBarContainer_NW3z" dir=ltr><input placeholder=Search aria-label=Search class="navbar__search-input searchInput_YFbd" value="" /><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/><span title="Text Editors" class=categoryLinkLabel_W154>Text Editors</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/features/codeactions><span title=Features class=categoryLinkLabel_W154>Features</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/build-tools/overview><span title="Build Tools" class=categoryLinkLabel_W154>Build Tools</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/contributors/project-goals><span title=Contributing class=categoryLinkLabel_W154>Contributing</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/integrations/new-build-tool><span title="Integrating with Metals" class=categoryLinkLabel_W154>Integrating with Metals</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/metals/docs/troubleshooting/proxy><span title=Troubleshooting class=categoryLinkLabel_W154>Troubleshooting</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/metals/docs/troubleshooting/proxy><span title="Proxy and mirrors" class=linkLabel_WmDU>Proxy and mirrors</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/metals/docs/troubleshooting/faq><span title="Frequently asked questions" class=linkLabel_WmDU>Frequently asked questions</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/metals/docs/acknowledgements/development><span title=Acknowledgements class=categoryLinkLabel_W154>Acknowledgements</span></a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/metals/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Troubleshooting</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Proxy and mirrors</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Proxy and mirrors</h1></header><p>There are several parts inside Metals and Bloop that require resolving
additional dependencies from the internet. Inside environments behind a proxy or
with private artifact repositories Metals might not be able to start, because it
cannot easily download the needed dependencies.</p>
<p>There are multiple ways of fixing these issues, but not all of them work in all
situations. While we are trying to make it as painless as possible to setup
everything, there are some steps that might need to be done manually.</p>
<p>Everything inside Metals uses Coursier to download its dependencies:</p>
<ul>
<li>The Visual Studio Code and <code>nvim-metals</code> extensions both use Coursier to
download Metals server, although they do it slightly different. The VS Code
extension has a Coursier boostrap file, which is used to is to download a full
Coursier version. It's used to keep the extension size down to a minimum,
whereas <code>nvim-metals</code> requires Coursier to be installed on the users machine.</li>
<li>Metals uses Coursier api to download dependencies needed for a particular
Scala version</li>
<li>Bloop uses Coursier api to download the SemanticDB plugin</li>
</ul>
<p>You can find some more information about particular topics on
<a href=https://get-coursier.io/docs/overview target=_blank rel="noopener noreferrer">Coursier's website</a>, but we will try to
summarize the most useful solutions here.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=mirrors>Mirrors<a href=#mirrors class=hash-link aria-label="Direct link to Mirrors" title="Direct link to Mirrors" translate=no>​</a></h2>
<p>If Maven Central is not available for your workspace it might be best to use
Coursier's mirrors. Especially since Coursier boostrap tries to download the
core of Coursier from Maven Central directly, which can only be changed using
the mirrors. Not all functionalities are yet available for the bootstrapped
Coursier version, including custom repositories, so mirrors are really the only
way to fix this.</p>
<p>There are different ways to setup mirrors:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=via-global-properties-file>Via global properties file<a href=#via-global-properties-file class=hash-link aria-label="Direct link to Via global properties file" title="Direct link to Via global properties file" translate=no>​</a></h3>
<p>Create <code>mirror.properties</code> file with the contents:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">central.from=https://repo1.maven.org/maven2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">central.to=http://exmaple.com:8080/nexus/content/groups/public</span><br/></span></code></pre></div></div>
<p>You need to replace the uri after <code>central.to=</code> with your private repository.</p>
<p>The location of the mirror file varies depending on the operating system:</p>
<ul>
<li>Windows:
<code>C:\Users\&lt;user_name>\AppData\Roaming\Coursier\config\mirror.properties</code></li>
<li>Linux: <code>~/.config/coursier/mirror.properties</code></li>
<li>MacOS: <code>~/Library/Preferences/Coursier/mirror.properties</code></li>
</ul>
<p>This solution will work in most cases for all previously mentioned usages of
Coursier, which is especially important in the case of the Bloop server, which
when started by Metals will not have any system properties forwarded.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=via-environment-variable>Via environment variable<a href=#via-environment-variable class=hash-link aria-label="Direct link to Via environment variable" title="Direct link to Via environment variable" translate=no>​</a></h3>
<p>You can set the environment variable <code>COURSIER_MIRRORS</code> with the location of the
file containing the mirror definition. That environment variable will need to
available either locally or globally for the Metals server. In case of the
Visual Studio Code extension it means you will need to start it from command
line with that variable in scope.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=via-properties>Via properties<a href=#via-properties class=hash-link aria-label="Direct link to Via properties" title="Direct link to Via properties" translate=no>​</a></h3>
<p>You can also use properties to specify the location of the mirror file, for
example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">-Dcoursier.mirrors=~/.config/coursier/mirror.properties</span><br/></span></code></pre></div></div>
<p>This property needs to be added to the Metals server and Coursier invocation.
However, this solution will not work for Bloop, because properties are not
forwarded to the invocation of the Bloop server. You will need to use a
different method for Bloop in this case or you can run the build server manually
with everything specified separately.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=custom-artifact-repositories-maven-or-ivy-resolvers>Custom artifact repositories (Maven or Ivy resolvers)<a href=#custom-artifact-repositories-maven-or-ivy-resolvers class=hash-link aria-label="Direct link to Custom artifact repositories (Maven or Ivy resolvers)" title="Direct link to Custom artifact repositories (Maven or Ivy resolvers)" translate=no>​</a></h2>
<p>In case you need to add custom repositories to resolve Metals server artifacts
you can use the <code>COURSIER_REPOSITORIES</code> environment variable. This will tell
Coursier to try to download artifacts from your private artifact repository.
This is also available as a setting in the Metals Visual Studio Code and
<code>nvim-metals</code> extensions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=proxy-settings>Proxy settings<a href=#proxy-settings class=hash-link aria-label="Direct link to Proxy settings" title="Direct link to Proxy settings" translate=no>​</a></h2>
<p>In some cases, workspaces might require a proxy in order to resolve the needed
artifacts. Depending on the way Metals server is started, proxy settings can be
specified using properties inside a <code>.jvmopts</code> file and
<code>metals.serverProperties</code> for Visual Studio Code or <code>serverProperties</code> in your
settings table for <code>nvim-metals</code>, or via properties for Coursier and Metals
invocations.</p>
<p>However, because proxy properties might vary between workspaces and a Bloop
server must work for multiple clients at the same time they are not forwarded to
the Bloop itself. To make sure that Bloop uses the correct proxy settings, you
can specify them by copying the correct <code>.jvmopts</code> file to the <code>~/.bloop</code>
directory, which will make them global.</p>
<p>If you are using a manually installed Bloop server, each time you run <code>bloop</code>
from commandline, the proxy settings will be reapplied according to the current
workspace's <code>.jvmopts</code>. This should not be an issue, since those settings are
required only to download the compiler bridges and SemanticDB plugin.</p>
<p><strong>Important</strong> Each setting needs to be on a separate line.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting>Troubleshooting<a href=#troubleshooting class=hash-link aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate=no>​</a></h2>
<p>There has already been a couple of issues surrounding this topic, if you are
still having issues you can take a look at some of them:</p>
<ul>
<li><a href=https://github.com/scalameta/metals/issues/1315 target=_blank rel="noopener noreferrer">https://github.com/scalameta/metals/issues/1315</a></li>
<li><a href=https://github.com/scalameta/metals/issues/1301 target=_blank rel="noopener noreferrer">https://github.com/scalameta/metals/issues/1301</a></li>
<li><a href=https://github.com/scalameta/metals/issues/1306 target=_blank rel="noopener noreferrer">https://github.com/scalameta/metals/issues/1306</a></li>
<li><a href=https://github.com/scalameta/metals/issues/1362 target=_blank rel="noopener noreferrer">https://github.com/scalameta/metals/issues/1362</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=the-server-did-not-start-got-failedtoopenbspconnection>The server did not start, got FailedToOpenBspConnection<a href=#the-server-did-not-start-got-failedtoopenbspconnection class=hash-link aria-label="Direct link to The server did not start, got FailedToOpenBspConnection" title="Direct link to The server did not start, got FailedToOpenBspConnection" translate=no>​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">error: The command bsp --protocol tcp --port 44559 returned with an error</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">error: The launcher failed to establish a bsp connection, aborting...</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ERROR Failed to connect with build server, no functionality will work.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">java.lang.RuntimeException: The server did not start, got FailedToOpenBspConnection</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at bloop.launcher.LauncherMain.failPromise$1(Launcher.scala:92)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at bloop.launcher.LauncherMain.runLauncher(Launcher.scala:119)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.meta.internal.metals.BloopServers$$anon$1.run(BloopServers.scala:101)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.FutureTask.run(FutureTask.java:264)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.lang.Thread.run(Thread.java:834)</span><br/></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">Exception in thread "bloop-server-background" java.io.IOException: Cannot run program "java" (in directory "&lt;some path here ...>"): error=2, No such file or directory</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">        at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)</span><br/></span></code></pre></div></div>
<p>This might mean that you don't have your java installation on your PATH and
Bloop was unable to start.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=timeout-waiting-for-buildinitialize-response>Timeout waiting for 'build/initialize' response<a href=#timeout-waiting-for-buildinitialize-response class=hash-link aria-label="Direct link to Timeout waiting for 'build/initialize' response" title="Direct link to Timeout waiting for 'build/initialize' response" translate=no>​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">INFO  tracing is disabled for protocol BSP, to enable tracing of incoming and outgoing JSON messages create an empty file at C:\Users\tgodzik\AppData\Local\scalameta\metals\cache\bsp.trace.json</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ERROR Timeout waiting for 'build/initialize' response</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">ERROR Failed to connect with build server, no functionality will work.</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">java.util.concurrent.TimeoutException</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1886)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2021)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.meta.internal.metals.BuildServerConnection$.initialize(BuildServerConnection.scala:259)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.meta.internal.metals.BuildServerConnection$.$anonfun$fromSockets$1(BuildServerConnection.scala:203)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.util.Success.$anonfun$map$1(Try.scala:255)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.util.Success.map(Try.scala:213)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.concurrent.Future.$anonfun$map$1(Future.scala:292)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.concurrent.impl.Promise.liftedTree1$1(Promise.scala:33)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.concurrent.impl.Promise.$anonfun$transform$1(Promise.scala:33)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at scala.concurrent.impl.CallbackRunnable.run(Promise.scala:64)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">	at java.lang.Thread.run(Thread.java:834)</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">WARN  Stopped configuration of SemanticDB in Scala 2.13.1 projects: Error downloading org.scalameta:semanticdb-scalac_2.13.1:4.3.0</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  not found: C:\Users\tgodzik\.ivy2\local\org.scalameta\semanticdb-scalac_2.13.1\4.3.0\ivys\ivy.xml</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">  download error: Caught java.net.ConnectException: Connection timed out: connect (Connection timed out: connect) while downloading https://repo1.maven.org/maven2/org/scalameta/semanticdb-scalac_2.13.1/4.3.0/semanticdb-scalac_2.13.1-4.3.0.pom</span><br/></span></code></pre></div></div>
<p>This might mean you need to specify proxy settings for Bloop or add custom
repositories as specified above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=mirrors-still-do-not-work-for-all-dependencies>Mirrors still do not work for all dependencies<a href=#mirrors-still-do-not-work-for-all-dependencies class=hash-link aria-label="Direct link to Mirrors still do not work for all dependencies" title="Direct link to Mirrors still do not work for all dependencies" translate=no>​</a></h3>
<p>In some specific configurations it might be needed to define additional mirrors
like:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">jcenter.from=https://repo1.maven.org/maven2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">jcenter.to=https://artifactory.mycomany.com/maven2</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">typesafe.from=https://repo.typesafe.com/typesafe/ivy-releases</span><br/></span><span class=token-line style=color:#bfc7d5><span class="token plain">typesafe.to=https://artifactory.mycompany.com/typesafe-ivy-releases/</span><br/></span></code></pre></div></div>
<p>The number of repositories to add depends on how the company's infrastructure is
set up. The key is to keep adding mirror entries until you've fixed each resolve
error. In case of sbt you can find out what the repos are named like
typesafe.from|to by checking
<a href=https://www.scala-sbt.org/1.x/docs/Resolvers.html#Predefined+resolvers target=_blank rel="noopener noreferrer">the official documentation</a>
and any custom resolvers your workspace has defined.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/scalameta/metals/edit/main/docs/troubleshooting/proxy.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/metals/docs/integrations/debug-adapter-protocol><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Running and debugging</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/metals/docs/troubleshooting/faq><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Frequently asked questions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#mirrors class="table-of-contents__link toc-highlight">Mirrors</a><ul><li><a href=#via-global-properties-file class="table-of-contents__link toc-highlight">Via global properties file</a><li><a href=#via-environment-variable class="table-of-contents__link toc-highlight">Via environment variable</a><li><a href=#via-properties class="table-of-contents__link toc-highlight">Via properties</a></ul><li><a href=#custom-artifact-repositories-maven-or-ivy-resolvers class="table-of-contents__link toc-highlight">Custom artifact repositories (Maven or Ivy resolvers)</a><li><a href=#proxy-settings class="table-of-contents__link toc-highlight">Proxy settings</a><li><a href=#troubleshooting class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href=#the-server-did-not-start-got-failedtoopenbspconnection class="table-of-contents__link toc-highlight">The server did not start, got FailedToOpenBspConnection</a><li><a href=#timeout-waiting-for-buildinitialize-response class="table-of-contents__link toc-highlight">Timeout waiting for 'build/initialize' response</a><li><a href=#mirrors-still-do-not-work-for-all-dependencies class="table-of-contents__link toc-highlight">Mirrors still do not work for all dependencies</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Overview</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/metals/docs/>Overview</a><li class=footer__item><a class=footer__link-item href=/metals/docs/build-tools/overview>Build Tools</a><li class=footer__item><a class=footer__link-item href=/metals/docs/contributors/project-goals>Project Goals</a><li class=footer__item><a class=footer__link-item href=/metals/docs/contributors/getting-started>Contributing</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Social</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/scalameta/metals target=_blank>
                      <img src="https://img.shields.io/github/stars/scalameta/metals.svg?color=%23087e8b&label=stars&logo=github&style=social"/>
                    </a><li class=footer__item><a href=https://discord.gg/RFpSVth target=_blank>
                      <img src="https://img.shields.io/discord/632642981228314653?logo=discord&style=social"/>
                    </a><li class=footer__item><a href=https://twitter.com/scalameta target=_blank>
                      <img src="https://img.shields.io/twitter/follow/scalameta.svg?logo=twitter&style=social"/>
                    </a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/metals/img/scalameta-logo.png class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/metals/img/scalameta-logo.png class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"/></div><div class=footer__copyright>Copyright © 2025 Metals</div></div></div></footer></div></body>