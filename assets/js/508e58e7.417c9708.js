"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["3127"],{20040:function(e,t,o){o.r(t),o.d(t,{frontMatter:()=>r,toc:()=>d,default:()=>h,metadata:()=>s,assets:()=>l,contentTitle:()=>a});var s=JSON.parse('{"id":"troubleshooting/faq","title":"Frequently asked questions","description":"This is a collection of frequently asked questions. We do our best to ensure","source":"@site/target/docs/troubleshooting/faq.md","sourceDirName":"troubleshooting","slug":"/troubleshooting/faq","permalink":"/metals/docs/troubleshooting/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/scalameta/metals/edit/main/docs/troubleshooting/faq.md","tags":[],"version":"current","lastUpdatedBy":null,"lastUpdatedAt":null,"frontMatter":{"id":"faq","title":"Frequently asked questions"},"sidebar":"docs","previous":{"title":"Proxy and mirrors","permalink":"/metals/docs/troubleshooting/proxy"},"next":{"title":"The Development of Metals","permalink":"/metals/docs/acknowledgements/development"}}'),n=o(74848),i=o(84429);let r={id:"faq",title:"Frequently asked questions"},a,l={},d=[{value:"How do I get more debugging information?",id:"how-do-i-get-more-debugging-information",level:2},{value:"I&#39;m using Scala 2.13.x but doctor shows me <code>*-build</code> and <code>*-build-build</code> at 2.12.x",id:"im-using-scala-213x-but-doctor-shows-me--build-and--build-build-at-212x",level:2},{value:"Why do I see this popup about Bloop when I upgrade?",id:"why-do-i-see-this-popup-about-bloop-when-i-upgrade",level:2},{value:"Worksheets",id:"worksheets",level:2},{value:"How do I run a worksheet?",id:"how-do-i-run-a-worksheet",level:3},{value:"I don&#39;t see evaluations",id:"i-dont-see-evaluations",level:3},{value:"I can&#39;t access symbols from my workspace in my worksheet",id:"i-cant-access-symbols-from-my-workspace-in-my-worksheet",level:3},{value:"I see spurious errors or worksheet fails to evaluate",id:"i-see-spurious-errors-or-worksheet-fails-to-evaluate",level:2},{value:"Why do I get a warning to save my file when I try to organize imports?",id:"why-do-i-get-a-warning-to-save-my-file-when-i-try-to-organize-imports",level:2},{value:"Can&#39;t connect to sbt BSP on Apple M1",id:"cant-connect-to-sbt-bsp-on-apple-m1",level:2}];function u(e){let t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"This is a collection of frequently asked questions. We do our best to ensure\neverything is included in the docs in the relevant places, but sometimes it's\neither hard to explain in the context of the docs or there just isn't a good\nenough place to stick it. This is an attempt to document some of the most common\nquestions that we see related to Metals."}),"\n",(0,n.jsx)(t.h2,{id:"how-do-i-get-more-debugging-information",children:"How do I get more debugging information?"}),"\n",(0,n.jsxs)(t.p,{children:["If you are using VS Code add ",(0,n.jsx)(t.code,{children:"-Dmetals.loglevel=debug"})," to the\n",(0,n.jsx)(t.code,{children:"metals.serverProperties"})," setting, otherwise just add that property as an\nadditional parameter for starting Metals server."]}),"\n",(0,n.jsxs)(t.h2,{id:"im-using-scala-213x-but-doctor-shows-me--build-and--build-build-at-212x",children:["I'm using Scala 2.13.x but doctor shows me ",(0,n.jsx)(t.code,{children:"*-build"})," and ",(0,n.jsx)(t.code,{children:"*-build-build"})," at 2.12.x"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://i.imgur.com/mgnRXse.png",alt:"build-build-doctor"})}),"\n",(0,n.jsxs)(t.p,{children:["When using sbt and Metals you get completions and hovers in your sbt build\nfiles. This is done by extra BSP connections with Bloop. So your build is\nactually a build target as well as your meta-build. This is why for example you\nsee nested ",(0,n.jsx)(t.code,{children:"project/project/metals.sbt"})," files. The version of Scala that sbt\nuses is 2.12.12 at this moment, so you will see that reflected in Doctor since\nthe ",(0,n.jsx)(t.code,{children:"*-build"})," and ",(0,n.jsx)(t.code,{children:"*-build-build"})," represent your build and meta-build. If you\nsee that it's even an older version of Scala, like 2.12.7, this can be fixed by\nbumping your sbt version so you don't get a warning about unsupported versions\nof Scala in your project."]}),"\n",(0,n.jsxs)(t.p,{children:["Note: ",(0,n.jsx)(t.em,{children:"If you use sbt as your BSP server as well as your build tool, you won't\nsee this in the Doctor since sbt does not yet have sbt file support."})]}),"\n",(0,n.jsx)(t.h2,{id:"why-do-i-see-this-popup-about-bloop-when-i-upgrade",children:"Why do I see this popup about Bloop when I upgrade?"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://i.imgur.com/0rtoIxy.png",alt:"update-bloop"})}),"\n",(0,n.jsxs)(t.p,{children:["Sometimes when you update to the latest version of Metals you will see this\npopup. Remember that ",(0,n.jsx)(t.a,{href:"https://scalacenter.github.io/bloop/",children:"Bloop"})," runs in the\nbackground on your machine. Once it's started, even if you close Metals, it\ndoesn't shut down. So let's say you start Metals and no Bloop is running. Metals\nwill then start Bloop with the current version that Metals knows about. For\nexample, let's say it starts 1.4.4. Later that day a new version of Metals comes\nout that uses Bloop 1.4.5. When you update, Metals detects that 1.4.4 is\nrunning, and then you see the prompt in the image saying that it needs a newer\nversion. Probably to either include a bug fix from Bloop, a new feature, etc.\nWhy doesn't Metals just shut down Bloop and restart automatically? That's a\ngreat question, and one that we're exploring. However, it's a bit tricky since\ncurrently there is no way for Metals to know if it started Bloop or if you\nmanually started Bloop. In the latter situation, we wouldn't want to shut down\nthe server that you may have manually started at a specific version. For the\nvast majority of users, when you see this update, just click ",(0,n.jsx)(t.strong,{children:"Turn off old\nserver"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"worksheets",children:"Worksheets"}),"\n",(0,n.jsxs)(t.p,{children:["Make sure to check out the ",(0,n.jsx)(t.code,{children:"worksheet"})," section on your editor page. For example,\nyou can find information on worksheets in\n",(0,n.jsx)(t.a,{href:"/metals/docs/editors/vscode#worksheets",children:"VS Code here"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"how-do-i-run-a-worksheet",children:"How do I run a worksheet?"}),"\n",(0,n.jsxs)(t.p,{children:["Keep in mind that worksheets work a bit differently than you may be used to with\nMetals. Whereas in other editors you may need to ",(0,n.jsx)(t.em,{children:"run"})," your worksheet to see the\nresults, worksheets in Metals evaluate on save, so there is no need to ",(0,n.jsx)(t.em,{children:"run"}),"\nyour worksheet."]}),"\n",(0,n.jsx)(t.h3,{id:"i-dont-see-evaluations",children:"I don't see evaluations"}),"\n",(0,n.jsxs)(t.p,{children:["If you don't see any evaluations, make sure the name of your file is\n",(0,n.jsx)(t.code,{children:"*.worksheet.sc"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"i-cant-access-symbols-from-my-workspace-in-my-worksheet",children:"I can't access symbols from my workspace in my worksheet"}),"\n",(0,n.jsxs)(t.p,{children:["If you find you can't include a package, class, or really any symbol from your\nworkspace, keep in mind that where you create your worksheets matter. If you\nhave created your worksheet in a ",(0,n.jsx)(t.code,{children:"src"})," directory, you should have full access to\nyour classpath and your worksheet Scala version should match that of your\nproject. If you create your worksheet in the root of your project, you will be\non the default Scala version (2.12.12), and you won't have access to anything\nexcept for the standard lib on your classpath."]}),"\n",(0,n.jsx)(t.h2,{id:"i-see-spurious-errors-or-worksheet-fails-to-evaluate",children:"I see spurious errors or worksheet fails to evaluate"}),"\n",(0,n.jsxs)(t.p,{children:["Worksheet code is entirely wrapped in a class (",(0,n.jsx)(t.code,{children:"class MdocApp"}),"). The class wrapper is needed as a counter measure to dead locks issues, however the wrapper can cause issues for some valid Scala code snippets. Issues like getting stuck in a infinite loop while evaluating or throwing a ",(0,n.jsx)(t.code,{children:"StackOverflowException"}),". Full description of the issue - ",(0,n.jsx)(t.a,{href:"https://github.com/scalameta/mdoc/issues/853",children:"mdoc/#853"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["If worksheet evaluation times out, you can also increase the timeout by setting ",(0,n.jsx)(t.code,{children:"-Dmetals.worksheet-timeout=<number of seconds>"})," server property:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://i.imgur.com/v2GEanF.png",alt:"worksheet-timeout"})}),"\n",(0,n.jsx)(t.h2,{id:"why-do-i-get-a-warning-to-save-my-file-when-i-try-to-organize-imports",children:"Why do I get a warning to save my file when I try to organize imports?"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://i.imgur.com/g8d82bV.png",alt:"organize-imports-warning"})}),"\n",(0,n.jsx)(t.p,{children:"You'll currently see this if you try to use your editor action to organize\nimports. You'll also see this if you use the following setting in VS Code."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'"editor.codeActionsOnSave": {\n  "source.organizeImports": true\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["This happens because ",(0,n.jsx)(t.a,{href:"https://scalacenter.github.io/scalafix/",children:"Scalafix"}),"(which\nis used for this feature) needs your code saved before it can organize your\nimports. There are some conversations going on about how to achieve this in the\nfuture, but for now you'll need to save your file before using this feature."]}),"\n",(0,n.jsxs)(t.p,{children:["For context: ",(0,n.jsx)(t.a,{href:"https://github.com/scalameta/metals/issues/2120",children:"#2120"})]}),"\n",(0,n.jsx)(t.h2,{id:"cant-connect-to-sbt-bsp-on-apple-m1",children:"Can't connect to sbt BSP on Apple M1"}),"\n",(0,n.jsxs)(t.p,{children:["It might help to add an additional sbt setting to ",(0,n.jsx)(t.code,{children:"$HOME/.sbt/1.0/global.sbt"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"serverConnectionType := ConnectionType.Tcp,\n"})}),"\n",(0,n.jsxs)(t.p,{children:["then reload Metals. More on global settings\n",(0,n.jsx)(t.a,{href:"https://www.scala-sbt.org/1.x/docs/Global-Settings.html",children:"here"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"For context:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://github.com/scalameta/metals/issues/2798",children:"#2798"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://github.com/sbt/sbt/issues/6162",children:"#6162"})}),"\n"]})]})}function h(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},84429:function(e,t,o){o.d(t,{R:()=>r,x:()=>a});var s=o(96540);let n={},i=s.createContext(n);function r(e){let t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);